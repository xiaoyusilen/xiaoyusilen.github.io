<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      Python Mysql Script | 小宇宙 | xiaoyusilen 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="xiaoyusilen">
    
    

    <meta name="description" content="Script again昨天被拖去开了个会，然后就莫名其妙的多了一个任务去写一个脚本计算历史订单的一些乱七八糟的东西，总之就是很麻烦的一个东西啦，然后就不得不用py写脚本啦，这次的脚本需要连接数据库，so~
About virtualenv为什么要用virtualenv这个东西嘞，当然是因为保持我们系统内的Python环境的干净，如果我们项目A需要用到某个第三方包的2.x版本，而项目B需要用到同一">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Mysql Script | 小宇宙 | xiaoyusilen">
<meta property="og:url" content="http://yoursite.com/2017/03/08/python-mysql-script/index.html">
<meta property="og:site_name" content="小宇宙 | xiaoyusilen">
<meta property="og:description" content="Script again昨天被拖去开了个会，然后就莫名其妙的多了一个任务去写一个脚本计算历史订单的一些乱七八糟的东西，总之就是很麻烦的一个东西啦，然后就不得不用py写脚本啦，这次的脚本需要连接数据库，so~
About virtualenv为什么要用virtualenv这个东西嘞，当然是因为保持我们系统内的Python环境的干净，如果我们项目A需要用到某个第三方包的2.x版本，而项目B需要用到同一">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdfnfrv6adj30sc04mmy7.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdfnfr2iivj30eo03sdgb.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fdfnfsfbdqj31kw16ohdt.jpg">
<meta property="og:updated_time" content="2017-04-12T01:15:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Mysql Script | 小宇宙 | xiaoyusilen">
<meta name="twitter:description" content="Script again昨天被拖去开了个会，然后就莫名其妙的多了一个任务去写一个脚本计算历史订单的一些乱七八糟的东西，总之就是很麻烦的一个东西啦，然后就不得不用py写脚本啦，这次的脚本需要连接数据库，so~
About virtualenv为什么要用virtualenv这个东西嘞，当然是因为保持我们系统内的Python环境的干净，如果我们项目A需要用到某个第三方包的2.x版本，而项目B需要用到同一">
<meta name="twitter:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdfnfrv6adj30sc04mmy7.jpg">
    
    
    
      <link rel="icon" type="image/x-icon" href="/king.ico">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">小宇宙 | xiaoyusilen</a></h1>
        <hr class="panel-cover__divider" />

        
        <p class="panel-cover__description">
          Life.pop(&#39;Fear&#39;)
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



<nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
      <!-- Github -->
      <li class="navigation__item">
        <a href="https://github.com/xiaoyusilen" title="">
          <i class='icon icon-social-github'></i>
          <span class="label">GitHub</span>
        </a>
      </li>
    

    <!-- China social icon -->
    <!--
    
      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-douban'></i>
          <span class="label">Douban</span>
        </a>
      </li>

      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
      </li>

    -->

      <li class="navigation__item">
        <a href="mailto:kleineweltzhang@hotmail.com" title="">
          <i class='icon icon-mail'></i>
          <span class="label">Weixin</span>
        </a>
      </li>




  </ul>
</nav>



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">Python Mysql Script</h1>

    

    <div class="post-meta">
      <time datetime="2017-03-08" class="post-meta__date date">2017-03-08</time> 

      <span class="post-meta__tags tags">

          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/Mysql/">Mysql</a>, <a class="tags-link" href="/tags/Python/">Python</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <h4 id="Script-again"><a href="#Script-again" class="headerlink" title="Script again"></a>Script again</h4><p>昨天被拖去开了个会，然后就莫名其妙的多了一个任务去写一个脚本计算历史订单的一些乱七八糟的东西，总之就是很麻烦的一个东西啦，然后就不得不用py写脚本啦，这次的脚本需要连接数据库，so~</p>
<h4 id="About-virtualenv"><a href="#About-virtualenv" class="headerlink" title="About virtualenv"></a>About virtualenv</h4><p>为什么要用virtualenv这个东西嘞，当然是因为保持我们系统内的Python环境的干净，如果我们项目A需要用到某个第三方包的2.x版本，而项目B需要用到同一个第三方包的3.x版本，这样装在同一个环境里就不好办了，所以我们可以为每一个项目配置一个专属于它的Python环境。</p>
<h4 id="Begin-with-brew"><a href="#Begin-with-brew" class="headerlink" title="Begin with brew"></a>Begin with brew</h4><ul>
<li><code>brew install python</code></li>
<li><code>brew cask install  mysql-connector-python</code><ul>
<li>use brew install <code>mysql-connector-python</code> or use (venv) pip install</li>
</ul>
</li>
<li><code>pip install virtualenv</code></li>
</ul>
<p>Then, move to your project folder, you can specify the version of python, </p>
<ul>
<li><code>virtualenv --no-site-packages --python=python3  venv</code> </li>
</ul>
<p>In this step, you can use venv as this environmental name or some else you want.</p>
<ul>
<li><code>source venv/bin/activate</code></li>
</ul>
<p>Then, you will find the change,</p>
<ul>
<li><code>(venv)project folder name$</code></li>
</ul>
<p>Just <code>pip</code> you want, now we need pip <code>mysql-python</code>,</p>
<ul>
<li><code>pip install mysql-connector-python</code></li>
</ul>
<ul>
<li><code>pip install mysql-python</code></li>
<li><code>deactivate</code></li>
</ul>
<p>Then, you can test like this,</p>
<ul>
<li><code>python</code></li>
</ul>
<p>You will see,</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdfnfrv6adj30sc04mmy7.jpg" alt="WechatIMG54"></p>
<p>Then, do like this,</p>
<ul>
<li><code>import MySQLdb</code></li>
</ul>
<p>If you don’t see like this,</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdfnfr2iivj30eo03sdgb.jpg" alt="WechatIMG55"></p>
<p>Congratulations, you are successed to install <code>mysql-python</code>.</p>
<h4 id="How-to-share-your-Python-environment"><a href="#How-to-share-your-Python-environment" class="headerlink" title="How to share your Python environment"></a>How to share your Python environment</h4><ul>
<li><p><code>pip freeze &gt; requirements.txt</code></p>
</li>
<li><p>Then you can get a txt file named <code>requirements</code> , this file contains the extends packages you need and the version you use.</p>
</li>
<li><p>Like as below,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MySQL-python==1.2.5</div><div class="line">python-dateutil==2.6.0</div></pre></td></tr></table></figure>
</li>
<li><p>Use this you can share your Python environment to others, at the same time other people can get the same environment as yours from this file. Run the following commands in the terminal:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install -r requirements.txt</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Code-Now"><a href="#Code-Now" class="headerlink" title="Code Now"></a>Code Now</h4><p>I will show you how to operate mysql,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding:utf-8</span></div><div class="line"><span class="keyword">import</span> MySQLdb</div><div class="line"><span class="keyword">import</span> ConfigParser</div><div class="line"><span class="keyword">import</span> Queue</div><div class="line"></div><div class="line"><span class="string">'''</span></div><div class="line">MySQL connect select insert update delete operate</div><div class="line">'''</div><div class="line"></div><div class="line"><span class="comment"># 连接线上数据库，用于查询</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span><span class="params">(object)</span>:</span></div><div class="line">    error_code = <span class="string">''</span>  <span class="comment"># MySQL错误码</span></div><div class="line">    _instance = <span class="keyword">None</span>  <span class="comment"># 实例</span></div><div class="line">    _conn = <span class="keyword">None</span>  <span class="comment"># 数据库连接</span></div><div class="line">    _cur = <span class="keyword">None</span>  <span class="comment"># 游标</span></div><div class="line"></div><div class="line">    _TIMEOUT = <span class="number">30</span>  <span class="comment"># 默认超时时间</span></div><div class="line">    _timecount = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 数据库配置</span></div><div class="line">        self.conf = ConfigParser.ConfigParser()</div><div class="line">        self.conf.read(<span class="string">'config.conf'</span>)</div><div class="line">        <span class="keyword">print</span> self.conf.get(<span class="string">"mysql"</span>, <span class="string">'mysql_host'</span>)</div><div class="line">        dbconfig = &#123;</div><div class="line">            <span class="string">'host'</span>: self.conf.get(<span class="string">"mysql"</span>, <span class="string">"mysql_host"</span>),</div><div class="line">            <span class="string">'port'</span>: self.conf.getint(<span class="string">"mysql"</span>, <span class="string">"mysql_port"</span>),</div><div class="line">            <span class="string">'user'</span>: self.conf.get(<span class="string">"mysql"</span>, <span class="string">"mysql_user"</span>),</div><div class="line">            <span class="string">'passwd'</span>: self.conf.get(<span class="string">"mysql"</span>, <span class="string">"mysql_passwd"</span>),</div><div class="line">            <span class="string">'db'</span>: self.conf.get(<span class="string">"mysql"</span>, <span class="string">"mysql_db"</span>),</div><div class="line">            <span class="string">'charset'</span>: self.conf.get(<span class="string">"mysql"</span>, <span class="string">"mysql_charset"</span>),</div><div class="line">        &#125;</div><div class="line">        <span class="comment"># 创建MySQL连接</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._conn = MySQLdb.connect(host=dbconfig[<span class="string">'host'</span>],</div><div class="line">                                         port=dbconfig[<span class="string">'port'</span>],</div><div class="line">                                         user=dbconfig[<span class="string">'user'</span>],</div><div class="line">                                         passwd=dbconfig[<span class="string">'passwd'</span>],</div><div class="line">                                         db=dbconfig[<span class="string">'db'</span>],</div><div class="line">                                         charset=dbconfig[<span class="string">'charset'</span>])</div><div class="line">        <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">            self.error_code = e.args[<span class="number">0</span>]</div><div class="line">            error_msg = <span class="string">'MySQL error!'</span>, e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]</div><div class="line">            <span class="keyword">print</span> error_msg</div><div class="line"></div><div class="line">            <span class="keyword">if</span> self._timecount &lt; self._TIMEOUT:</div><div class="line">                interval = <span class="number">5</span></div><div class="line">                self._timecount += interval</div><div class="line">                <span class="keyword">return</span> self.__init__(dbconfig)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">raise</span> Exception(error_msg)</div><div class="line"></div><div class="line">        self._cur = self._conn.cursor()</div><div class="line">        self._instance = MySQLdb</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self,sql)</span>:</span></div><div class="line">        <span class="comment"># 执行select语句</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._cur.execute(<span class="string">"set names utf8"</span>)</div><div class="line">            query_result = self._cur.execute(sql)</div><div class="line">        <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">            self.error_code = e.args[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> <span class="string">"Error:MySQL Error Code "</span>, e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]</div><div class="line">            query_result = <span class="keyword">False</span></div><div class="line">        <span class="keyword">return</span> query_result</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self,sql)</span>:</span></div><div class="line">        <span class="comment"># 执行update语句</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._cur.execute(<span class="string">"set names utf8"</span>)</div><div class="line">            update_result = self._cur.execute(sql)</div><div class="line">            self._conn.commit()</div><div class="line">        <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">            self.error_code = e.args[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> <span class="string">"Error:MySQL Error Code "</span>,e.args[<span class="number">0</span>],e.args[<span class="number">1</span>]</div><div class="line">            update_result = <span class="keyword">False</span></div><div class="line">        <span class="keyword">return</span> update_result</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, sql)</span>:</span></div><div class="line">        <span class="comment"># 执行insert语句</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._cur.execute(<span class="string">"set names utf8"</span>)</div><div class="line">            insert_result = self._cur.execute(sql)</div><div class="line">            self._conn.commit()</div><div class="line">        <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">            self.error_code = e.args[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> <span class="string">"Error:MySQL Error Code "</span>, e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]</div><div class="line">            insert_result = <span class="keyword">False</span></div><div class="line">        <span class="keyword">return</span> insert_result</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self, sql)</span>:</span></div><div class="line">        <span class="comment"># 执行delete语句</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._cur.execute(<span class="string">"set names utf8"</span>)</div><div class="line">            delete_result = self._cur.execute(sql)</div><div class="line">            self._conn.commit()</div><div class="line">        <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">            self.error_code = e.args[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> <span class="string">"Error:MySQL Error Code "</span>, e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]</div><div class="line">            delete_result = <span class="keyword">False</span></div><div class="line">        <span class="keyword">return</span> delete_result</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fetchAllRows</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 返回select结果列表</span></div><div class="line">        <span class="keyword">return</span> self._cur.fetchall()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fetchOneRow</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 返回一行结果，然后游标指向下一行，到达最后一行以后，返回None</span></div><div class="line">        <span class="keyword">return</span> self._cur.fetchone()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getRowCount</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 获取结果行数</span></div><div class="line">        <span class="keyword">return</span> int(self._cur.rowcount)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">commit</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 提交数据库操作（upate,insert,delete）</span></div><div class="line">        <span class="keyword">return</span> self._cur.commit()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rollback</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 数据库回滚操作</span></div><div class="line">        <span class="keyword">return</span> self._cur.rollback()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 释放资源</span></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            self._cur.close()</div><div class="line">            self._conn.close()</div><div class="line">        <span class="keyword">except</span>:</div><div class="line">            <span class="keyword">pass</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 关闭数据库连接</span></div><div class="line">        self.__del__()</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="comment"># import requests</span></div><div class="line">    <span class="keyword">import</span> json</div><div class="line">    <span class="keyword">import</span> sys</div><div class="line">    reload(sys)</div><div class="line">    sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p>And your config file should be like,</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[mysql]</div><div class="line">mysql_host = localhost</div><div class="line">mysql_user = root</div><div class="line">mysql_port = 3306</div><div class="line">mysql_db = test</div><div class="line">mysql_charset = utf8</div><div class="line">mysql_passwd = ******</div></pre></td></tr></table></figure>
<p>Then, you can connect your database.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">test_db = MySQL()</div><div class="line">test_sql = <span class="string">"select * from table_name"</span></div><div class="line"><span class="comment"># 查询</span></div><div class="line">test = test_db.query(test_sql)</div><div class="line"><span class="comment"># 获取行数</span></div><div class="line">rows = test_db.getRowCount()</div><div class="line"><span class="comment"># 获取一条记录</span></div><div class="line">test_record = test_db.fetchOneRow()</div><div class="line"></div><div class="line"><span class="comment"># 关闭数据库</span></div><div class="line">test_db.close()</div></pre></td></tr></table></figure>
<h4 id="Nonsense"><a href="#Nonsense" class="headerlink" title="Nonsense"></a>Nonsense</h4><p>女王节快乐~</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdfnfsfbdqj31kw16ohdt.jpg" alt="IMG_1829"></p>
<h4 id="Useful-Link"><a href="#Useful-Link" class="headerlink" title="Useful Link"></a>Useful Link</h4><p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000" target="_blank" rel="external">Virtualenv</a></p>

  </section>

  <section class="post-comments">

    <!-- 将评论系统（例如Disqus、多说、友言、畅言等）提供的代码片段粘贴在这里 -->
    
</section>


</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2016-2017. | ❤ <a href="http://xiaoyu.world">xiaoyusilen</a> | <a href="https://github.com/someus/huno">Huno</a></span>
    <span id="busuanzi_container_site_pv" style="display: inline;">
         This site already had <span id="busuanzi_value_site_pv"></span> Visits by
    </span>
    <span id="busuanzi_container_site_uv" style="display: inline;">
    <span id="busuanzi_value_site_uv"></span> Visitors 
    </span>

</footer>

        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
